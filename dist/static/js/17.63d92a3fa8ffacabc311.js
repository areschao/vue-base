webpackJsonp([17],{"TI/r":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"RoleDialog",data:function(){return{tableData:[],dialogFormVisible:!1,multipleSelection:[],userId:"",roleIdStr:""}},methods:{showDialog:function(t){this.dialogFormVisible=t},initData:function(t){var e=this;this.$api.getRole().then(function(i){var o=i.data;e.tableData=o.returnData,e.userId=t}),this.$api.getUserRole(t).then(function(t){t.data.returnData.forEach(function(t){e.tableData.forEach(function(i){i.id===t.id&&e.$refs.roleTable.toggleRowSelection(i)})})})},handleSelectionChange:function(t){this.multipleSelection=t},saveUserRole:function(){var t=this;this.roleIdStr="";for(var e=0;e<this.multipleSelection.length;e++)this.roleIdStr+=this.multipleSelection[e].id+",";this.roleIdStr=this.roleIdStr.substring(0,this.roleIdStr.lastIndexOf(",")),console.log(this.userId),console.log(this.roleIdStr),this.$api.saveUserRoles({userId:this.userId,roleIdStr:this.roleIdStr}).then(function(e){t.$message.success("系统消息:设置角色成功"),t.dialogFormVisible=!1,t.$emit("reloadData")})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"角色",visible:t.dialogFormVisible,width:"30%","append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-table",{ref:"roleTable",attrs:{data:t.tableData,width:"500"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"200"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveUserRole}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var a=i("C7Lr")(o,l,!1,function(t){i("s6oF")},"data-v-16efff1c",null);e.default=a.exports},s6oF:function(t,e){}});
//# sourceMappingURL=17.63d92a3fa8ffacabc311.js.map