webpackJsonp([0,9,15,17],{"1WM+":function(e,t){},"4MyM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("nuks"),r=a("alPg"),i=a("TI/r"),n=a("7ASq"),l=a("bDjX"),s={data:function(){return{tableData:[],total:1,loading:!1,currentRow:null,user:{loginName:"",phone:"",name:"",createTime:""}}},components:{AddUserDialog:o.default,UpdateUserDialog:r.default,RoleDialog:i.default,AppTabs:n.a,AppPage:l.a},methods:{loadData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.loading=!0,this.$api.getUser({page:t,rows:a}).then(function(t){var a=t.data;e.tableData=a.returnData.records,e.total=a.returnData.total,e.loading=!1})},addUser:function(){this.$refs.addUserDialog.showDialog(!0)},updateUser:function(e,t){this.$refs.updateUserDialog.initData(t),this.$refs.updateUserDialog.showDialog(!0)},deleteUser:function(e,t){var a=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$api.deleteUser(t.id).then(function(e){var t=e.data;a.$config.executeResult(t)&&(a.$message.success("删除成功"),a.loadData())})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},changeRole:function(){null===this.currentRow?this.$message.warning("系统消息","请至少选中一行"):(this.$refs.roleDialog.showDialog(!0),this.$refs.roleDialog.initData(this.currentRow.id))},resetPassword:function(){var e=this;this.$confirm("确定要重置密码么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.resetUserPassword(e.currentRow.id).then(function(t){var a=t.data;e.$config.executeResult(a)&&e.loadData()})}).catch(function(){e.$message({type:"info",message:"已取消重置"})})},handleCurrentChange:function(e){this.currentRow=e}},mounted:function(){this.loadData()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-body"},[a("div",{staticClass:"box"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("添加")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticStyle:{"margin-top":"15px"},attrs:{data:e.tableData,stripe:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginName",label:"工号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-button",{staticClass:"fa fa-edit",attrs:{type:"success",plain:""},on:{click:function(a){e.updateUser(t.$index,t.row)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-trash-o",attrs:{type:"danger",plain:""},on:{click:function(a){e.deleteUser(t.$index,t.row)}}})],1)}}])})],1),e._v(" "),a("add-user-dialog",{ref:"addUserDialog",on:{reloadData:e.loadData}}),e._v(" "),a("update-user-dialog",{ref:"updateUserDialog",on:{reloadData:e.loadData}}),e._v(" "),a("role-dialog",{ref:"roleDialog",on:{reloadData:e.loadData}}),e._v(" "),a("app-page",{ref:"appPage",attrs:{total:e.total},on:{reloadData:e.loadData}}),e._v(" "),a("div",{staticClass:"changeRole"},[a("div",{},[a("el-button",{attrs:{disabled:!e.currentRow,icon:"fa fa-user-o"},on:{click:e.changeRole}},[e._v(" 分配角色")]),e._v(" "),a("el-button",{attrs:{disabled:!e.currentRow,icon:"fa fa-user-o"},on:{click:e.resetPassword}},[e._v(" 重置密码")])],1)])],1)])},staticRenderFns:[]};var c=a("C7Lr")(s,u,!1,function(e){a("DDF9")},null,null);t.default=c.exports},DDF9:function(e,t){},"TI/r":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"RoleDialog",data:function(){return{tableData:[],dialogFormVisible:!1,multipleSelection:[],userId:"",roleIdStr:""}},methods:{showDialog:function(e){this.dialogFormVisible=e},initData:function(e){var t=this;this.$api.getRole().then(function(a){var o=a.data;t.tableData=o.returnData,t.userId=e}),this.$api.getUserRole(e).then(function(e){e.data.returnData.forEach(function(e){t.tableData.forEach(function(a){a.id===e.id&&t.$refs.roleTable.toggleRowSelection(a)})})})},handleSelectionChange:function(e){this.multipleSelection=e},saveUserRole:function(){var e=this;this.roleIdStr="";for(var t=0;t<this.multipleSelection.length;t++)this.roleIdStr+=this.multipleSelection[t].id+",";this.roleIdStr=this.roleIdStr.substring(0,this.roleIdStr.lastIndexOf(",")),console.log(this.userId),console.log(this.roleIdStr),this.$api.saveUserRoles({userId:this.userId,roleIdStr:this.roleIdStr}).then(function(t){e.$message.success("系统消息:设置角色成功"),e.dialogFormVisible=!1,e.$emit("reloadData")})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"角色",visible:e.dialogFormVisible,width:"30%","append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-table",{ref:"roleTable",attrs:{data:e.tableData,width:"500"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"200"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveUserRole}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(o,r,!1,function(e){a("s6oF")},"data-v-16efff1c",null);t.default=i.exports},alPg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"UpdateUserDialog",data:function(){var e=function(e,t,a){if(!t)return a(new Error("内容不能为空"));a()};return{formData:{id:"",loginName:"",name:"",phone:""},rules:{loginName:[{required:!0,validator:e,trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],name:[{required:!0,validator:e,trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("内容不能为空"));setTimeout(function(){Number(t)?11!=t.length?a(new Error("请输入正确的手机号")):a():a(new Error("请输入数字值"))})},trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"},{pattern:/^[1][3456789][0-9]{9}$/,message:"请输入正确的手机号"}]},dialogFormVisible:!1,formLabelWidth:"80px"}},methods:{showDialog:function(e){this.dialogFormVisible=e},initData:function(e){this.formData.id=e.id,this.formData.loginName=e.loginName,this.formData.name=e.name,this.formData.phone=e.phone},updateUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$api.addOrUpdateUser(t.formData).then(function(e){var a=e.data;t.$config.executeResult(a)&&(t.$message.success("修改成功"),t.$emit("reloadData"),t.dialogFormVisible=!1)})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改用户",visible:e.dialogFormVisible,width:"30%","append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"用于登陆的账号长度在6-20之间","auto-complete":"on"},model:{value:e.formData.loginName,callback:function(t){e.$set(e.formData,"loginName",t)},expression:"formData.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"on"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请填写真实的手机号","auto-complete":"on"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),e._v(" "),a("el-input",{attrs:{type:"hidden","auto-complete":"on"},model:{value:e.formData.id,callback:function(t){e.$set(e.formData,"id",t)},expression:"formData.id"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateUser("formData")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(o,r,!1,function(e){a("whsX")},"data-v-e0715aee",null);t.default=i.exports},bDjX:function(e,t,a){"use strict";var o={data:function(){return{pageSizes:[10,20,30,40],pageSize:10,currentPage:1}},props:{total:Number},methods:{sizeChange:function(e){this.currentPage=1,this.pageSize=e,this.$emit("reloadData",this.currentPage,e)},currentChange:function(e){this.currentPage=e,this.$emit("reloadData",e,this.pageSize)}}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("el-pagination",{staticClass:"fenye",attrs:{background:"","current-page":this.currentPage,"page-sizes":this.pageSizes,"page-size":this.pageSize,layout:"total, sizes, prev, pager, next",total:this.total},on:{"size-change":this.sizeChange,"current-change":this.currentChange}})},staticRenderFns:[]};var i=a("C7Lr")(o,r,!1,function(e){a("tacw")},"data-v-1c72c0d9",null);t.a=i.exports},nuks:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"AddUserDialog",data:function(){var e=function(e,t,a){if(!t)return a(new Error("内容不能为空"));a()};return{formData:{id:"",loginName:"",name:"",phone:""},rules:{loginName:[{required:!0,validator:e,trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],name:[{required:!0,validator:e,trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("内容不能为空"));setTimeout(function(){Number(t)?11!=t.length?a(new Error("请输入正确的手机号")):a():a(new Error("请输入数字值"))})},trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"},{pattern:/^[1][3456789][0-9]{9}$/,message:"请输入正确的手机号"}]},dialogFormVisible:!1,formLabelWidth:"120px"}},methods:{showDialog:function(e){this.dialogFormVisible=e},addUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$api.addOrUpdateUser(t.formData).then(function(e){var a=e.data;t.$config.executeResult(a)&&(t.$message.success("操作成功"),t.$refs.formData.resetFields(),t.$emit("reloadData"),t.dialogFormVisible=!1)})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增",visible:e.dialogFormVisible,width:"30%","append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"用于登陆的账号长度在6-20之间","auto-complete":"on"},model:{value:e.formData.loginName,callback:function(t){e.$set(e.formData,"loginName",t)},expression:"formData.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"on"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请填写真实的手机号","auto-complete":"on"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUser("formData")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(o,r,!1,function(e){a("1WM+")},"data-v-381ff1d6",null);t.default=i.exports},s6oF:function(e,t){},tacw:function(e,t){},whsX:function(e,t){}});
//# sourceMappingURL=0.ad0faeb0e4e7591eefe8.js.map