webpackJsonp([2,13,18,19],{"0wB8":function(e,t){},"K+Yr":function(e,t){},MWph:function(e,t){},QxyU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"MenuDialog",data:function(){return{dialogFormVisible:!1,MenuManagement:[],checkId:[],roleId:"",boxCheck:[],defaultProps:{children:"subMenu",label:"label"},requestId:Number}},methods:{menu:function(e,t){var a=this;this.requestId=t,this.checkId=[],this.$api.getMenuVo().then(function(i){var l=i.data;a.MenuManagement=l.returnData,a.$api.findMenuById(t).then(function(e){var t=e.data;a.checkId=t.returnData}),a.dialogFormVisible=e})},updatePermissions:function(){var e=this,t=this.$refs.tree.getHalfCheckedKeys();if(this.boxCheck=this.$refs.tree.getCheckedKeys(),0==this.boxCheck.length)this.$message.error("至少选择一个菜单");else{for(var a="",i=0;i<this.boxCheck.length;i++)i==this.boxCheck.length-1?a+=this.boxCheck[i]:a+=this.boxCheck[i]+",";for(i=0;i<t.length;i++)a+=","+t[i];var l={roleId:this.requestId,menuIdStr:a};this.$api.saveMenu(l).then(function(t){"成功"==t.data.codeMsg?(e.$message.success("配置菜单成功"),e.dialogFormVisible=!1):e.$message.error("配置菜单错误")})}}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"配置菜单",visible:e.dialogFormVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-tree",{ref:"tree",attrs:{data:e.MenuManagement,"show-checkbox":"","node-key":"id","default-expanded-keys":[1],"default-checked-keys":e.checkId,props:e.defaultProps}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updatePermissions}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(i,l,!1,function(e){a("K+Yr")},"data-v-0cbb840f",null);t.default=n.exports},gPth:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"UpdateDialog",data:function(){return{dialogVisible:!1,labelPosition:"right",formLabelAlign:{name:"",detail:"",id:""},rules:{name:[{validator:function(e,t,a){if(!t)return a(new Error("内容不能为空"));a()},trigger:"blur"},{min:1,max:6,message:"长度在 1 到 6 个字符",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}]}}},methods:{updateDialog:function(e,t){this.dialogVisible=e,this.formLabelAlign.name=t.name,this.formLabelAlign.detail=t.description,this.id=t.id},updateRole:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.id,name:t.formLabelAlign.name,description:t.formLabelAlign.detail};t.$api.addRole(a).then(function(e){1==e.data.code?t.$message("请填写有效信息"):t.$config.executeResult(e.data)&&(t.$message.success("修改成功"),t.dialogVisible=!1,t.$emit("reloadData"))})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改角色",visible:e.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"formLabelAlign",attrs:{"label-position":e.labelPosition,"label-width":"80px","status-icon":"",model:e.formLabelAlign,rules:e.rules}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"detail"}},[a("el-input",{model:{value:e.formLabelAlign.detail,callback:function(t){e.$set(e.formLabelAlign,"detail",t)},expression:"formLabelAlign.detail"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateRole("formLabelAlign")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(i,l,!1,function(e){a("0wB8")},"data-v-126341f5",null);t.default=n.exports},jFc5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"AddDialog",data:function(){return{dialogVisible:!1,labelPosition:"right",formLabelAlign:{name:"",detail:""},rules:{name:[{validator:function(e,t,a){if(!t)return a(new Error("内容不能为空"));a()},trigger:"blur"},{min:1,max:6,message:"长度在 1 到 6 个字符",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}]}}},methods:{showDialog:function(e){this.dialogVisible=e},addRole:function(){var e=this,t={name:this.formLabelAlign.name,description:this.formLabelAlign.detail};this.$api.addRole(t).then(function(t){1==t.data.code?e.$message("请填写有效信息"):e.$config.executeResult(t.data)&&(e.$message.success("添加成功"),e.$refs.clearForm.resetFields(),e.$emit("reloadData"),e.dialogVisible=!1)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加角色",visible:e.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"clearForm",attrs:{"label-position":e.labelPosition,"label-width":"80px","status-icon":"",model:e.formLabelAlign,rules:e.rules}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"detail"}},[a("el-input",{model:{value:e.formLabelAlign.detail,callback:function(t){e.$set(e.formLabelAlign,"detail",t)},expression:"formLabelAlign.detail"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(i,l,!1,function(e){a("MWph")},"data-v-4924bb83",null);t.default=n.exports},kY3o:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("QxyU"),l=a("jFc5"),n=a("gPth"),o={data:function(){return{addLoading:!1,roleLists:[],currentRow:null,val:10}},components:{MenuDialog:i.default,AddDialog:l.default,UpdateDialog:n.default},methods:{loadData:function(){var e=this;this.$api.getRole().then(function(t){var a=t.data;return e.roleLists=a.returnData,e.loading=!1,t})},handleCurrentChange:function(e){this.currentRow=e},addRole:function(){this.$refs.AddDialog.showDialog(!0)},updateRole:function(e,t){this.$refs.UpdateDialog.updateDialog(!0,t)},openMenu:function(e,t){this.$refs.MenuDialog.menu(!0,t.id)},deleteRole:function(e,t){var a=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){a.$api.deleteRole(t.id).then(function(e){a.$config.executeResult(e.data)&&(a.$message.success("删除成功"),a.loadData())})}).catch(function(){a.$message({type:"info",message:"取消删除"})})}},mounted:function(){this.loadData()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-body"},[a("div",{staticClass:"box"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addRole}},[e._v("添加")]),e._v(" "),a("el-table",{staticStyle:{"margin-top":"15px"},attrs:{data:e.roleLists,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"description"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"fa fa-bars",attrs:{type:"primary",plain:""},on:{click:function(a){e.openMenu(t.$index,t.row)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-edit",attrs:{type:"success",plain:""},on:{click:function(a){e.updateRole(t.$index,t.row)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-trash-o",attrs:{type:"danger",plain:""},on:{click:function(a){e.deleteRole(t.$index,t.row)}}})]}}])})],1)],1),e._v(" "),a("menu-dialog",{ref:"MenuDialog"}),e._v(" "),a("add-dialog",{ref:"AddDialog",on:{reloadData:e.loadData}}),e._v(" "),a("update-dialog",{ref:"UpdateDialog",on:{reloadData:e.loadData}})],1)},staticRenderFns:[]};var s=a("C7Lr")(o,r,!1,function(e){a("oyLh")},null,null);t.default=s.exports},oyLh:function(e,t){}});
//# sourceMappingURL=2.bcccb59a9570291a4a65.js.map