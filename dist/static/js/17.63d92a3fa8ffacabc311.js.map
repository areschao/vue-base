{"version":3,"sources":["webpack:///src/pages/user/RoleDialog.vue","webpack:///./src/pages/user/RoleDialog.vue?5440","webpack:///./src/pages/user/RoleDialog.vue"],"names":["RoleDialog","name","data","tableData","dialogFormVisible","multipleSelection","userId","roleIdStr","methods","showDialog","val","this","initData","id","_this","$api","getRole","then","result","returnData","getUserRole","forEach","row","role","$refs","roleTable","toggleRowSelection","handleSelectionChange","saveUserRole","_this2","i","length","substring","lastIndexOf","console","log","saveUserRoles","$message","success","$emit","user_RoleDialog","render","_vm","_h","$createElement","_c","_self","attrs","title","visible","width","append-to-body","on","update:visible","$event","ref","selection-change","type","_v","prop","label","staticClass","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wGAiBA,IAAAA,GACAC,KAAA,aACAC,KAFA,WAGA,OACAC,aACAC,mBAAA,EACAC,qBACAC,OAAA,GACAC,UAAA,KAGAC,SACAC,WADA,SACAC,GACAC,KAAAP,kBAAAM,GAEAE,SAJA,SAIAC,GAAA,IAAAC,EAAAH,KACAA,KAAAI,KAAAC,UAAAC,KAAA,SAAAC,GAAA,IACAhB,EAAAgB,EAAAhB,KACAY,EAAAX,UAAAD,EAAAiB,WACAL,EAAAR,OAAAO,IAEAF,KAAAI,KAAAK,YAAAP,GAAAI,KAAA,SAAAC,GACAA,EAAAhB,KACAiB,WAAAE,QAAA,SAAAC,GACAR,EAAAX,UAAAkB,QAAA,SAAAE,GACAA,EAAAV,KAAAS,EAAAT,IACAC,EAAAU,MAAAC,UAAAC,mBAAAH,UAMAI,sBArBA,SAqBAjB,GACAC,KAAAN,kBAAAK,GAEAkB,aAxBA,WAwBA,IAAAC,EAAAlB,KACAA,KAAAJ,UAAA,GACA,QAAAuB,EAAA,EAAAA,EAAAnB,KAAAN,kBAAA0B,OAAAD,IACAnB,KAAAJ,WAAAI,KAAAN,kBAAAyB,GAAAjB,GAAA,IAEAF,KAAAJ,UAAAI,KAAAJ,UAAAyB,UAAA,EAAArB,KAAAJ,UAAA0B,YAAA,MACAC,QAAAC,IAAAxB,KAAAL,QACA4B,QAAAC,IAAAxB,KAAAJ,WACAI,KAAAI,KAAAqB,eAAA9B,OAAAK,KAAAL,OAAAC,UAAAI,KAAAJ,YAAAU,KAAA,SAAAC,GACAW,EAAAQ,SAAAC,QAAA,eACAT,EAAAzB,mBAAA,EACAyB,EAAAU,MAAA,mBC5DeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA/B,KAAagC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,aAAuBE,OAAOC,MAAA,KAAAC,QAAAP,EAAAtC,kBAAA8C,MAAA,MAAAC,kBAAA,GAAiFC,IAAKC,iBAAA,SAAAC,GAAkCZ,EAAAtC,kBAAAkD,MAA+BT,EAAA,YAAiBU,IAAA,YAAAR,OAAuB7C,KAAAwC,EAAAvC,UAAA+C,MAAA,OAAmCE,IAAKI,mBAAAd,EAAAf,yBAA8CkB,EAAA,mBAAwBE,OAAOU,KAAA,YAAAP,MAAA,SAAkCR,EAAAgB,GAAA,KAAAb,EAAA,mBAAoCE,OAAOY,KAAA,OAAAC,MAAA,OAAAV,MAAA,UAA4C,GAAAR,EAAAgB,GAAA,KAAAb,EAAA,OAA4BgB,YAAA,gBAAAd,OAAmCe,KAAA,UAAgBA,KAAA,WAAejB,EAAA,aAAkBO,IAAIW,MAAA,SAAAT,GAAyBZ,EAAAtC,mBAAA,MAAgCsC,EAAAgB,GAAA,SAAAhB,EAAAgB,GAAA,KAAAb,EAAA,aAA8CE,OAAOU,KAAA,WAAiBL,IAAKW,MAAArB,EAAAd,gBAA0Bc,EAAAgB,GAAA,kBAEryBM,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEnE,EACAwC,GATF,EAVA,SAAA4B,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/17.63d92a3fa8ffacabc311.js","sourcesContent":["<template>\n  <el-dialog title=\"角色\" :visible.sync=\"dialogFormVisible\" width=\"30%\" :append-to-body=\"true\">\n    <el-table :data=\"tableData\" width=\"500\" ref=\"roleTable\" @selection-change=\"handleSelectionChange\">\n      <el-table-column\n        type=\"selection\"\n        width=\"200\">\n      </el-table-column>\n      <el-table-column prop=\"name\" label=\"角色名称\" width=\"200\"></el-table-column>\n    </el-table>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"saveUserRole\">确 定</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n  export default {\n    name: \"RoleDialog\",\n    data() {\n      return {\n        tableData: [],\n        dialogFormVisible: false,\n        multipleSelection: [],\n        userId: '',\n        roleIdStr: ''\n      }\n    },\n    methods: {\n      showDialog(val) {\n        this.dialogFormVisible = val;\n      },\n      initData(id) {\n        this.$api.getRole().then(result => {\n          let {data} = result\n          this.tableData = data.returnData\n          this.userId = id\n        })\n        this.$api.getUserRole(id).then(result => {\n          let {data} = result\n          data.returnData.forEach(row => {\n            this.tableData.forEach(role => {\n              if (role.id === row.id) {\n                this.$refs.roleTable.toggleRowSelection(role);\n              }\n            })\n          })\n        })\n      },\n      handleSelectionChange(val) {\n        this.multipleSelection = val;\n      },\n      saveUserRole() {\n        this.roleIdStr = ''\n        for (let i = 0; i < this.multipleSelection.length; i++) {\n          this.roleIdStr += this.multipleSelection[i].id + ','\n        }\n        this.roleIdStr = this.roleIdStr.substring(0, this.roleIdStr.lastIndexOf(','));\n        console.log(this.userId)\n        console.log(this.roleIdStr)\n        this.$api.saveUserRoles({userId: this.userId, roleIdStr: this.roleIdStr}).then(result => {\n          this.$message.success(\"系统消息:设置角色成功\")\n          this.dialogFormVisible = false;\n          this.$emit('reloadData');\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user/RoleDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"角色\",\"visible\":_vm.dialogFormVisible,\"width\":\"30%\",\"append-to-body\":true},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-table',{ref:\"roleTable\",attrs:{\"data\":_vm.tableData,\"width\":\"500\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"角色名称\",\"width\":\"200\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveUserRole}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-16efff1c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/RoleDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16efff1c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./RoleDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16efff1c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RoleDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-16efff1c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user/RoleDialog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}